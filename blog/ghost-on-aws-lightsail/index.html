<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Ghost is a free and open source blogging platform written in JavaScript and distributed under the MIT License, designed to simplify the process of online publishing for individual bloggers as well as online publications.">

  
  <link rel="alternate" hreflang="en-us" href="https://www.nazim.dev/blog/ghost-on-aws-lightsail/">

  


  
  
  
  <meta name="theme-color" content="#F18F01">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cutive+Mono%7CLora:400,700%7CRoboto:400,700&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162891441-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-162891441-1', { 'anonymize_ip': true });

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hudac935d27c7abab8db1a8cd459536cfe_19313_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hudac935d27c7abab8db1a8cd459536cfe_19313_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://www.nazim.dev/blog/ghost-on-aws-lightsail/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Nazim">
  <meta property="og:url" content="https://www.nazim.dev/blog/ghost-on-aws-lightsail/">
  <meta property="og:title" content="Ghost (blog) on AWS Lightsail with Nginx, Let&#39;s Encrypt &amp; Mailgun | Nazim">
  <meta property="og:description" content="Ghost is a free and open source blogging platform written in JavaScript and distributed under the MIT License, designed to simplify the process of online publishing for individual bloggers as well as online publications."><meta property="og:image" content="https://www.nazim.dev/blog/ghost-on-aws-lightsail/featured.jpg">
  <meta property="twitter:image" content="https://www.nazim.dev/blog/ghost-on-aws-lightsail/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-05-21T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-05-21T00:00:00&#43;00:00">
  

  



  


  
  
  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js" integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css" integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin="anonymous">
  
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#F18F01",
          "text": "#FCFCFC"
        },
        "button": {
          "background": "#FCFCFC",
          "text": "#F18F01"
        }
      },
      "theme": "classic",
      "content": {
        "message": "This website uses cookies to ensure you get the best experience on our website.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "/privacy/"
      }
    })});
  </script>



  





  <title>Ghost (blog) on AWS Lightsail with Nginx, Let&#39;s Encrypt &amp; Mailgun | Nazim</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Nazim</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Nazim</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/portfolio"><span>Portfolio</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/travelogues"><span>Travelogues</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-md-auto">
      

        

        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact"><span>Contact</span></a>
        </li>

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Ghost (blog) on AWS Lightsail with Nginx, Let&#39;s Encrypt &amp; Mailgun</h1>

  
  <p class="page-subtitle">Low cost hosting option for a Ghost blog!</p>
  

  


<div class="article-metadata">

  
  
  
  
  <div>
    

  
  <span>Nazim</span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    May 21, 2019
  </span>
  

  

  

  
  
  
  <span class="middot-divider"></span>
  <a href="/blog/ghost-on-aws-lightsail/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/blog/">Blog</a></span>
  

</div>

  













<div class="btn-links mb-3">
  
  








  


















  
  
  
    
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary my-1 mr-1" href="https://ghost.org/" target="_blank" rel="noopener">
    
    Ghost
  </a>

  
  
  
    
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary my-1 mr-1" href="https://aws.amazon.com/lightsail/" target="_blank" rel="noopener">
    
    AWS Lightsail
  </a>

  
  
  
    
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary my-1 mr-1" href="https://nginx.org/" target="_blank" rel="noopener">
    
    NGINX
  </a>

  
  
  
    
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary my-1 mr-1" href="https://www.mailgun.com/" target="_blank" rel="noopener">
    
    Mailgun
  </a>


</div>


</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 540px;">
  <div style="position: relative">
    <img src="/blog/ghost-on-aws-lightsail/featured_hubd3b04d63d8f55064f6ee6b4ed83c971_100119_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    <span class="article-header-caption">Photo by <a href="https://unsplash.com/photos/FHnnjk1Yj7Y">Nick Morrison on Unsplash</a></span>
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      <blockquote>
<p>Ghost is a free and open source blogging platform written in JavaScript and distributed under the MIT License, designed to simplify the process of online publishing for individual bloggers as well as online publications.</p>
</blockquote>
<p>The Ghost blogging software is free to download and use.</p>
<h4 id="the-prerequisites-recommended-by-ghost-are-as-below">The prerequisites recommended by Ghost are as below</h4>
<ul>
<li>Ubuntu 16.04 or Ubuntu 18.04</li>
<li>NGINX (minimum of 1.9.5 for SSL)</li>
<li>A supported version of Node.js</li>
<li>MySQL 5.5, 5.6, or 5.7 (not &gt;= 8.0)</li>
<li>Systemd</li>
<li>A server with at least 1GB memory</li>
<li>A registered domain name</li>
</ul>
<p>However, with the above server requirement of at least 1 GB memory, the minimum cost of the AWS Lightsail instance (linux based) will be $5.00 per month.</p>
<p>It is possible to use the $3.50 per month instance which comes with 512MB memory by using the Alpine docker images available at Docker Hub.</p>
<blockquote>
<p>This guide will take you through the steps required for hosting a Ghost blog (docker image) on AWS Lightsail with Nginx webserver, Letsencrypt SSL encryption.</p>
</blockquote>
<h3 id="instructions">Instructions</h3>
<p>Create a Lightsail Instance
You can read about <strong>AWS Lightsail</strong> from my previous post 
<a href="/blog/aws-lightsail/">here</a></p>
<p><strong>Login/create an account with AWS Lightsail and then create an instance:</strong>





  











<figure >


  <a data-fancybox="" href="/img/aws-lightsail/Snip20190519_1.png" >


  <img src="/img/aws-lightsail/Snip20190519_1.png" alt=""  >
</a>



</figure>
</p>
<blockquote>
<p><strong>Note:</strong> Valid payment details have to be setup with AWS if you are creating the amazon account for the first time.</p>
</blockquote>
<p>Choose a location as close as possible to the location where you get the most visitors from. For the instance, choose <strong>Linux/Unix</strong> and select blueprint for OS Only. Under this category, choose <strong>Ubuntu 18.04 LTS</strong>.</p>





  











<figure >


  <a data-fancybox="" href="/img/aws-lightsail/Snip20190519_3.png" >


  <img src="/img/aws-lightsail/Snip20190519_3.png" alt=""  >
</a>



</figure>

<p>Choose the instance plan for the lowest priced option at $3.50 USD per month.</p>





  











<figure >


  <a data-fancybox="" href="/img/aws-lightsail/Snip20190519_4.png" >


  <img src="/img/aws-lightsail/Snip20190519_4.png" alt=""  >
</a>



</figure>

<p>No additional scripts are required at this time. Once you have selected the name for your instance, click on <strong>&ldquo;Create Instance&rdquo;</strong> button.</p>
<p>There are few additional steps required for accessing the instance and the documentation by AWS Lightsail covers the steps in detail. <strong>Please follow the link below to setup SSH, Assign a static IP, etc.</strong></p>
<p><a href="https://lightsail.aws.amazon.com/ls/docs/en_us/all">https://lightsail.aws.amazon.com/ls/docs/en_us/all</a></p>
<h3 id="update-packages">Update Packages</h3>
<p>Update the installed packages with the following lines.</p>
<pre><code class="language-bash"># Update package lists
sudo apt-get update
</code></pre>
<pre><code class="language-bash"># Update installed packages
sudo apt-get upgrade
</code></pre>
<h3 id="ufw">UFW</h3>
<p><strong>Ubuntu</strong> comes with it&rsquo;s own <strong>firewall</strong> - <em>UFW</em> , but we will not be enabling this in our case as AWS Lightsail already comes with a firewall which you can configure under the networking tab in your instance. If the HTTPS port is not already available, use the &ldquo;Add another&rdquo; option to add the port 443 for HTTPS.</p>





  











<figure >


  <a data-fancybox="" href="/img/aws-lightsail/Snip20190519_5.png" >


  <img src="/img/aws-lightsail/Snip20190519_5.png" alt=""  >
</a>



</figure>

<p>Once you have assigned the Static IP to your instance, modify the DNS Records at the domain registrar to point to the static IP.</p>
<ul>
<li>An A record with <a href="http://www.mydomain.com">www.mydomain.com</a> pointing to your server&rsquo;s public IP address.</li>
<li>An A record with mydomain.com pointing to your server&rsquo;s public IP address.</li>
</ul>
<h3 id="install-docker">Install Docker</h3>
<p>This example uses the script at 
<a href="https://get.docker.com/" target="_blank" rel="noopener">get.docker.com</a> to install the latest release of Docker CE on Linux.</p>
<pre><code class="language-bash">curl -fsSL https://get.docker.com -o get-docker.sh
</code></pre>
<p>If you would like to use Docker as a non-root user, you should now consider adding your user to the “docker” group with something like: (replace your-user with ubuntu)</p>
<pre><code class="language-bash">sudo usermod -aG docker your-user
</code></pre>
<div class="alert alert-note">
  <div>
    Remember to log out and back in for this to take effect!
  </div>
</div>
<h3 id="install-nginx">Install NGINX</h3>
<blockquote>
<p>nginx [engine x] is an HTTP and reverse proxy server, a mail proxy server, and a generic TCP/UDP proxy server, originally written by Igor Sysoev. For a long time, it has been running on many heavily loaded Russian sites including Yandex, Mail.Ru, VK, and Rambler. According to Netcraft, nginx served or proxied 26.22% busiest sites in April 2019.</p>
</blockquote>
<p><strong>Installing NGINX requires only the below command.</strong></p>
<pre><code class="language-bash"># Install NGINX
sudo apt-get install nginx
</code></pre>
<p>Once the installation is completed, you should be able to see the default NGINX html page when you access the static ip assigned to the Lightsail Instance through a browser.</p>





  











<figure >


  <a data-fancybox="" href="/img/aws-lightsail/Snip20190520_6.png" >


  <img src="/img/aws-lightsail/Snip20190520_6.png" alt=""  >
</a>



</figure>

<h3 id="setup-nginx-server-block">Setup NGINX Server block</h3>
<p>This step is required so that it&rsquo;s easier if you want to add/host multiple domains in the same instance. <em>Initially, we will setup the domain name to point to a temporary server block so that the next step for Let&rsquo;s encrypt can generate the required certificates for the domain.</em></p>
<blockquote>
<p>“VirtualHost” is an Apache term. NGINX does not have Virtual hosts, it has “Server Blocks” that use the server_name and listen directives to bind to tcp sockets.
You can find some examples for server blocks at the NGINX 
<a href="https://www.nginx.com/resources/wiki/start/topics/examples/server_blocks/" target="_blank" rel="noopener">wiki page</a>.</p>
</blockquote>
<p>We will use the default directory /var/www/html for our initial setup. When you access the url <a href="http://mydomain.com">http://mydomain.com</a>, the Welcome to NGINX page should be displayed.</p>
<p>Create a copy of the default configuration into a new file.</p>
<pre><code class="language-bash">sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/mydomain.com
</code></pre>
<p>Now, open the new file you created in your text editor with <strong>sudo</strong> privileges:</p>
<pre><code class="language-bash">sudo nano /etc/nginx/sites-available/mydomain.com
</code></pre>
<p><strong>Copy the below lines in the editor and save:</strong></p>
<pre><code class="language-nginx">        listen 80;
        listen [::]:80;

        root /var/www/html;
        index index.html index.htm index.nginx-debian.html;

        server_name mydomain.com www.mydomain.com;

        location / {
                try_files $uri $uri/ =404;
        }
}
</code></pre>
<p><strong>Enable the server block:</strong>
Now that we have our server block files, we need to enable them. We can do this by creating symbolic links from these files to the <strong>sites-enabled</strong> directory, which Nginx reads from during startup.</p>
<pre><code class="language-bash">sudo ln -s /etc/nginx/sites-available/mydomain.com /etc/nginx/sites-enabled/
</code></pre>
<p><strong>Follow the steps below to prevent hash bucket memory problem:</strong></p>
<pre><code class="language-bash">sudo nano /etc/nginx/nginx.conf
</code></pre>
<p>Within the file, find the <strong>server_names_hash_bucket_size</strong> directive. Remove the # symbol to uncomment the line:</p>
<pre><code class="language-vi">http {

    server_names_hash_bucket_size 64;

}
</code></pre>
<blockquote>
<p>Next, test to make sure that there are no syntax errors in any of your Nginx files:</p>
</blockquote>
<pre><code class="language-bash">sudo nginx -t
</code></pre>
<p>If no problems were found, restart Nginx to enable your changes:</p>
<pre><code class="language-bash">sudo systemctl restart nginx
</code></pre>
<div class="alert alert-note">
  <div>
    If you access the URL <a href="http://mydomain.com">http://mydomain.com</a> or <a href="http://www.mydomain.com">http://www.mydomain.com</a>, you should be able to see the NGINX start page now.
  </div>
</div>
<h3 id="install-ssl-certificates-with-lets-encrypt">Install SSL certificates with Let&rsquo;s encrypt</h3>
<p>Digital Ocean has an excellent guide for the installation of Let&rsquo;s Encrypt certificates at this 
<a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-18-04" target="_blank" rel="noopener">link</a>. However, I will still provide the steps relevant to our current setup based on this guide below.</p>
<p><strong>Install Let&rsquo;s Encrypt certbot:</strong></p>
<pre><code class="language-bash">sudo add-apt-repository ppa:certbot/certbot
</code></pre>
<p>You&rsquo;ll need to press <em>ENTER</em> to accept.</p>
<pre><code class="language-bash">sudo apt-get install certbot
</code></pre>
<div class="alert alert-note">
  <div>
    Certbot is now ready to use.
  </div>
</div>
<p><strong>Obtain the SSL Certificate:</strong>
Certbot provides a variety of ways to obtain SSL certificates through plugins. The Nginx plugin will take care of reconfiguring Nginx and reloading the config whenever necessary. To use this plugin, type the following:</p>
<pre><code class="language-bash">sudo certbot --nginx -d mydomain.com -d www.mydomain.com
</code></pre>
<div class="alert alert-note">
  <div>
    Follow the instructions in the window and complete the setup.
  </div>
</div>
<p><strong>Verify Auto Renewal</strong></p>
<pre><code class="language-bash">sudo certbot renew --dry-run
</code></pre>
<h3 id="nginx-configuration-to-use-ssl">NGINX Configuration to use SSL</h3>
<p>Now, open file you created in your text editor with sudo privileges:</p>
<pre><code class="language-bash">sudo nano /etc/nginx/sites-available/mydomain.com
</code></pre>
<p>Copy paste the below lines in the file.</p>
<pre><code class="language-nginx">server {
        listen 80;
        listen [::]:80;

        root /var/www/html;
        index index.html index.htm index.nginx-debian.html;

        server_name mydomain.com www.mydomain.com;

        location / {
                try_files $uri $uri/ =404;
        }

}

server {
        listen 443 ssl;
        listen [::]:443 ssl;

        server_name mydomain.com www.mydomain.com;

        location / {
          proxy_pass	http://127.0.0.1:2368;
	        proxy_set_header    X-Real-IP $remote_addr;
	        proxy_set_header    Host      $http_host;
		      proxy_set_header X-Forwarded-Proto https;
	        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        ssl_certificate /etc/letsencrypt/live/mydomain.com/fullchain.pem; # managed by Certbot
        ssl_certificate_key /etc/letsencrypt/live/mydomain.com/privkey.pem; # managed by Certbot
        include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
        ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}
</code></pre>
<h3 id="running-ghost-on-docker">Running Ghost on Docker</h3>
<p>We will now use a docker file to pull the docker container and install in our Lightsail instance. You may use any path you are comfortable with. I have used the home directory of the default ubuntu user in the example below.</p>
<p>The below script assumes that you also want to configure 
<a href="https://www.mailgun.com/" target="_blank" rel="noopener">Mailgun</a> with your Ghost blog for triggering emails from the blog.</p>
<blockquote>
<p>The most important piece of configuration once you&rsquo;ve been through the install process is to setup mail. Mail configuration allows Ghost to send emails such as lost password and user invite emails.</p>
</blockquote>
<div class="alert alert-note">
  <div>
    Follow instruction in the Mailgun setup to get the details for user and password for your account.
  </div>
</div>
<pre><code class="language-bash">sudo nano /home/ubuntu/ghost.sh
</code></pre>
<p>Copy paste the below code in the file. You will have to check the current version of Ghost on Docker Hub and updated the version number to the latest version. <strong>As we are on the lowest configuration of Lightsail instance, it is recommended to use the alpine version of the docker image.</strong></p>
<pre><code class="language-vi">#!/bin/sh
docker rm -f ghost

docker run --name ghost \
 -p 127.0.0.1:2368:2368 \
 -e url=https://www.mydomain.com \
 -v /etc/nginx/mydomain/html:/var/lib/ghost/content \
 -e mail__transport=&quot;SMTP&quot; \
 -e mail__from=&quot;Admin &lt;admin@mydomain.com&gt;&quot; \
 -e mail__options__service=&quot;Mailgun&quot; \
 -e mail__options__port=&quot;587&quot; \
 -e mail__options__host=&quot;smtp.eu.mailgun.org&quot; \
 -e mail__options__auth__user=&quot;postmaster@mail.mydomain.com&quot; \
 -e mail__options__auth__pass=&quot;&lt;use key from mailgun&gt;&quot; \
 --restart=always \
  -d ghost:2.22.0-alpine
</code></pre>
<p><strong>Ghost Docker Hub</strong> 
<a href="https://hub.docker.com/_/ghost/" target="_blank" rel="noopener">Link</a></p>
<div class="alert alert-note">
  <div>
    Anytime there is a new version of the docker image, just update the script file and run again to update your ghost docker image to the latest version.
  </div>
</div>
<p>Once the script has completed running, you should be able to access the Ghost blog using the URL <a href="https://mydomain.com">https://mydomain.com</a></p>
<p><strong>Add /admin to the URL for the initial setup to setup the Ghost admin account.</strong></p>
<blockquote>
<p>As we have configured the email with Mailgun in our script file, you can click on send button in the Test email configuration under &ldquo;Labs&rdquo; to verify your mailgun settings are working.</p>
</blockquote>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/blog/">Blog</a>
  
  <a class="badge badge-light" href="/tags/tech/">Tech</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://www.nazim.dev/blog/ghost-on-aws-lightsail/&amp;text=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://www.nazim.dev/blog/ghost-on-aws-lightsail/&amp;t=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun&amp;body=https://www.nazim.dev/blog/ghost-on-aws-lightsail/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://www.nazim.dev/blog/ghost-on-aws-lightsail/&amp;title=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun%20https://www.nazim.dev/blog/ghost-on-aws-lightsail/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://www.nazim.dev/blog/ghost-on-aws-lightsail/&amp;title=Ghost%20%28blog%29%20on%20AWS%20Lightsail%20with%20Nginx,%20Let&amp;#39;s%20Encrypt%20&amp;amp;%20Mailgun" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
    
    





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-square" src="/authors/nazim/avatar_huc5686ef2d19c49d90a91306921856909_428147_270x270_fill_q90_lanczos_center.jpg" alt="">
      

      <div class="media-body">
        <h5 class="card-title"><a href="https://www.nazim.dev/"></a></h5>
        <h6 class="card-subtitle">SAP HCM &amp; BW Consultant</h6>
        
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/about_me/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/nazim/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/nazimur-rahiman" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://500px.com/f_nazim" target="_blank" rel="noopener">
        <i class="fab fa-500px"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  


  





<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "pixodius-com" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>






  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/blog/aws-lightsail/">AWS Lightsail</a></li>
      
      <li><a href="/blog/my-home-assistant-setup/">My Home Assistant Setup</a></li>
      
      <li><a href="/blog/show-working/">Showing that you’re working is just as important as actually working</a></li>
      
      <li><a href="/blog/chennai-metro/">Chennai Metro</a></li>
      
      <li><a href="/blog/pale-blue-dot/">Pale Blue Dot</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    <script id="dsq-count-scr" src="https://pixodius-com.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms & Conditions</a>
    
  </p>
  

  <p class="powered-by">
    © 2020 Nazimur Rahiman - All rights reserved &middot; 

    Powered by
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
